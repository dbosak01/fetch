<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="fetch">
<title>fetch • fetch</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="fetch">
<meta property="og:description" content="fetch">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">fetch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/fetch.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dbosak01/fetch/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>fetch</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/fetch/blob/HEAD/vignettes/fetch.Rmd" class="external-link"><code>vignettes/fetch.Rmd</code></a></small>
      <div class="d-none name"><code>fetch.Rmd</code></div>
    </div>

    
    
<p>In 2020 I wrote a package called <a href="https://libr.r-sassy.org" class="external-link">libr</a> to deal with the problem of
managing multiple related datasets. This package allows you to manage
data from several popular data sources: SAS, Excel, CSV, and R. While
the package received generally positive feedback, users requested some
features that the package did not support:</p>
<ul>
<li>Users wanted to examine the data <em>before</em> loading it into
memory.</li>
<li>Users wanted to pick only <em>some</em> datasets to load into
memory.</li>
<li>Users wanted to subset all datasets in the library based on a
condition.</li>
</ul>
<p>After consideration of these requests, I determined that these
features would be most easily satisfied by creating a new package. That
package is <strong>fetch</strong>.</p>
<div class="section level2">
<h2 id="key-features">Key Features<a class="anchor" aria-label="anchor" href="#key-features"></a>
</h2>
<p>The <strong>fetch</strong> package allows you to retrieve data from
any of several different data sources while minimizing memory usage.
There are only two steps to retrieve data:</p>
<ul>
<li>Create a data catalog</li>
<li>Fetch data from the catalog</li>
</ul>
<p>The above two steps are accomplished by the following functions:</p>
<ul>
<li>
<code><a href="../reference/catalog.html">catalog()</a></code>: Defines a data catalog for a particular data
source</li>
<li>
<code><a href="../reference/fetch.html">fetch()</a></code>: Pulls a data item from the catalog and loads
it into memory</li>
</ul>
<p>The package has the following key features:</p>
<ul>
<li>The <code><a href="../reference/catalog.html">catalog()</a></code> function allows you to explore the data
before reading from the source.</li>
<li>The <code><a href="../reference/fetch.html">fetch()</a></code> function loads only the data you need for
your analysis.</li>
<li>The “where” parameter on the <code><a href="../reference/catalog.html">catalog()</a></code> function allows
you to subset across all datasets in the catalog.</li>
<li>The “select” and “top” parameters on the <code><a href="../reference/fetch.html">fetch()</a></code>
function let you further limit the data returned.</li>
<li>The “import_spec” parameters on the <code><a href="../reference/catalog.html">catalog()</a></code> and
<code><a href="../reference/fetch.html">fetch()</a></code> functions give you control over the column data
types.</li>
</ul>
</div>
<div class="section level2">
<h2 id="how-to-use-fetch">How to use <strong>fetch</strong><a class="anchor" aria-label="anchor" href="#how-to-use-fetch"></a>
</h2>
<p>Let’s start with a simple example. In this example we will create a
data catalog, examine its contents, and fetch a dataset from the
catalog. First, create and view the data catalog:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get sample data directory</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"fetch"</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Create catalog</span></span>
<span><span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/catalog.html">catalog</a></span><span class="op">(</span><span class="va">pkg</span>, <span class="va">engines</span><span class="op">$</span><span class="va">csv</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View catalog</span></span>
<span><span class="va">ct</span></span>
<span><span class="co"># data catalog: 6 items</span></span>
<span><span class="co"># - Source: C:/packages/fetch/inst/extdata</span></span>
<span><span class="co"># - Engine: csv</span></span>
<span><span class="co"># - Items:</span></span>
<span>    <span class="co"># data item 'ADAE': 56 cols 150 rows</span></span>
<span>    <span class="co"># data item 'ADEX': 17 cols 348 rows</span></span>
<span>    <span class="co"># data item 'ADPR': 37 cols 552 rows</span></span>
<span>    <span class="co"># data item 'ADPSGA': 42 cols 695 rows</span></span>
<span>    <span class="co"># data item 'ADSL': 56 cols 87 rows</span></span>
<span>    <span class="co"># data item 'ADVS': 37 cols 3617 rows</span></span></code></pre></div>
<p>As can be seen above, this catalog has 6 csv files in it. The number
of columns and rows are displayed for each file. Information about each
file is contained in the catalog. This information can be accessed using
list notion, like so:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View info for catalog item </span></span>
<span><span class="va">ct</span><span class="op">$</span><span class="va">ADEX</span></span>
<span><span class="co"># data item 'ADEX': 17 cols 348 rows</span></span>
<span><span class="co"># - Engine: csv</span></span>
<span><span class="co"># - Size: 70.7 Kb</span></span>
<span><span class="co"># - Last Modified: 2020-09-18 14:30:22</span></span>
<span><span class="co">#    Name   Column     Class Label Format NAs MaxChar</span></span>
<span><span class="co"># 1  ADEX  STUDYID character  &lt;NA&gt;     NA   0       3</span></span>
<span><span class="co"># 2  ADEX  USUBJID character  &lt;NA&gt;     NA   0      10</span></span>
<span><span class="co"># 3  ADEX   SUBJID character  &lt;NA&gt;     NA   0       3</span></span>
<span><span class="co"># 4  ADEX   SITEID character  &lt;NA&gt;     NA   0       2</span></span>
<span><span class="co"># 5  ADEX     TRTP character  &lt;NA&gt;     NA   8       5</span></span>
<span><span class="co"># 6  ADEX    TRTPN   numeric  &lt;NA&gt;     NA   8       1</span></span>
<span><span class="co"># 7  ADEX     TRTA character  &lt;NA&gt;     NA   8       5</span></span>
<span><span class="co"># 8  ADEX    TRTAN   numeric  &lt;NA&gt;     NA   8       1</span></span>
<span><span class="co"># 9  ADEX   RANDFL character  &lt;NA&gt;     NA   0       1</span></span>
<span><span class="co"># 10 ADEX    SAFFL character  &lt;NA&gt;     NA   0       1</span></span>
<span><span class="co"># 11 ADEX   MITTFL character  &lt;NA&gt;     NA   0       1</span></span>
<span><span class="co"># 12 ADEX  PPROTFL character  &lt;NA&gt;     NA   0       1</span></span>
<span><span class="co"># 13 ADEX    PARAM character  &lt;NA&gt;     NA   0      45</span></span>
<span><span class="co"># 14 ADEX  PARAMCD character  &lt;NA&gt;     NA   0       8</span></span>
<span><span class="co"># 15 ADEX   PARAMN   numeric  &lt;NA&gt;     NA   0       1</span></span>
<span><span class="co"># 16 ADEX     AVAL   numeric  &lt;NA&gt;     NA  16       4</span></span>
<span><span class="co"># 17 ADEX AVALCAT1 character  &lt;NA&gt;     NA  87      10</span></span></code></pre></div>
<p>When the catalog item is printed, it shows a data dictionary for the
specified dataset. Column names and data types are displayed, along with
some other useful attributes of your data.</p>
<p>Once the catalog is created, you are ready to fetch data from the
catalog:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Fetch data from a catalog</span></span>
<span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fetch.html">fetch</a></span><span class="op">(</span><span class="va">ct</span><span class="op">$</span><span class="va">ADEX</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View data</span></span>
<span><span class="va">dt</span></span>
<span><span class="co"># A tibble: 348 × 17</span></span>
<span><span class="co">#    STUDYID USUBJID    SUBJID SITEID TRTP  TRTPN TRTA  TRTAN RANDFL SAFFL MITTFL PPROTFL</span></span>
<span><span class="co">#    &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  </span></span>
<span><span class="co">#  1 ABC     ABC-01-049 049    01     ARM D     4 ARM D     4 Y      Y     Y      Y      </span></span>
<span><span class="co">#  2 ABC     ABC-01-049 049    01     ARM D     4 ARM D     4 Y      Y     Y      Y      </span></span>
<span><span class="co">#  3 ABC     ABC-01-049 049    01     ARM D     4 ARM D     4 Y      Y     Y      Y      </span></span>
<span><span class="co">#  4 ABC     ABC-01-049 049    01     ARM D     4 ARM D     4 Y      Y     Y      Y      </span></span>
<span><span class="co">#  5 ABC     ABC-01-050 050    01     ARM B     2 ARM B     2 Y      Y     Y      Y      </span></span>
<span><span class="co">#  6 ABC     ABC-01-050 050    01     ARM B     2 ARM B     2 Y      Y     Y      Y      </span></span>
<span><span class="co">#  7 ABC     ABC-01-050 050    01     ARM B     2 ARM B     2 Y      Y     Y      Y      </span></span>
<span><span class="co">#  8 ABC     ABC-01-050 050    01     ARM B     2 ARM B     2 Y      Y     Y      Y      </span></span>
<span><span class="co">#  9 ABC     ABC-01-051 051    01     ARM A     1 ARM A     1 Y      Y     Y      Y      </span></span>
<span><span class="co"># 10 ABC     ABC-01-051 051    01     ARM A     1 ARM A     1 Y      Y     Y      Y      </span></span>
<span><span class="co">#  338 more rows</span></span>
<span><span class="co">#  5 more variables: PARAM &lt;chr&gt;, PARAMCD &lt;chr&gt;, PARAMN &lt;dbl&gt;, AVAL &lt;dbl&gt;,</span></span>
<span><span class="co">#   AVALCAT1 &lt;chr&gt;</span></span>
<span><span class="co">#  Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>At this point, you can proceed with your analysis, or fetch
additional datasets from the catalog as needed. So easy!</p>
</div>
<div class="section level2">
<h2 id="additional-features">Additional Features<a class="anchor" aria-label="anchor" href="#additional-features"></a>
</h2>
<p>The above example covers the very basics. Now let’s look at some more
useful features of the <strong>fetch</strong> package.</p>
<div class="section level3">
<h3 id="apply-a-where-expression-to-a-fetch-operation">Apply a Where Expression to a Fetch Operation<a class="anchor" aria-label="anchor" href="#apply-a-where-expression-to-a-fetch-operation"></a>
</h3>
<p>What if you are performing an analysis on a subset of data? Is there
a way to apply a subset when the data is fetched? You can apply subset
criteria using the “where” parameter on the <code><a href="../reference/fetch.html">fetch()</a></code>
function. Like this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get sample data directory</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"fetch"</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Create catalog</span></span>
<span><span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/catalog.html">catalog</a></span><span class="op">(</span><span class="va">pkg</span>, <span class="va">engines</span><span class="op">$</span><span class="va">csv</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subset data for a specific subject</span></span>
<span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fetch.html">fetch</a></span><span class="op">(</span><span class="va">ct</span><span class="op">$</span><span class="va">ADVS</span>, where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">SUBJID</span> <span class="op">==</span> <span class="st">'049'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View data subset</span></span>
<span><span class="va">dt</span></span>
<span><span class="co"># A tibble: 44 × 37</span></span>
<span><span class="co">#    STUDYID USUBJID    SUBJID SITEID SRCDOM SRCVAR   SRCSEQ TRTP  TRTPN TRTA  TRTAN RANDFL</span></span>
<span><span class="co">#    &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; </span></span>
<span><span class="co">#  1 ABC     ABC-01-049 049    01     VS     VSSTRESN      9 ARM D     4 ARM D     4 Y     </span></span>
<span><span class="co">#  2 ABC     ABC-01-049 049    01     VS     VSSTRESN     41 ARM D     4 ARM D     4 Y     </span></span>
<span><span class="co">#  3 ABC     ABC-01-049 049    01     NA     NA           NA ARM D     4 ARM D     4 Y     </span></span>
<span><span class="co">#  4 ABC     ABC-01-049 049    01     VS     VSSTRESN     34 ARM D     4 ARM D     4 Y     </span></span>
<span><span class="co">#  5 ABC     ABC-01-049 049    01     VS     VSSTRESN     35 ARM D     4 ARM D     4 Y     </span></span>
<span><span class="co">#  6 ABC     ABC-01-049 049    01     VS     VSSTRESN     36 ARM D     4 ARM D     4 Y     </span></span>
<span><span class="co">#  7 ABC     ABC-01-049 049    01     VS     VSSTRESN     37 ARM D     4 ARM D     4 Y     </span></span>
<span><span class="co">#  8 ABC     ABC-01-049 049    01     VS     VSSTRESN     38 ARM D     4 ARM D     4 Y     </span></span>
<span><span class="co">#  9 ABC     ABC-01-049 049    01     VS     VSSTRESN     39 ARM D     4 ARM D     4 Y     </span></span>
<span><span class="co"># 10 ABC     ABC-01-049 049    01     VS     VSSTRESN     40 ARM D     4 ARM D     4 Y     </span></span>
<span><span class="co">#  34 more rows</span></span>
<span><span class="co">#  25 more variables: SAFFL &lt;chr&gt;, MITTFL &lt;chr&gt;, PPROTFL &lt;chr&gt;, TRTSDT &lt;chr&gt;,</span></span>
<span><span class="co">#   TRTEDT &lt;chr&gt;, ADT &lt;chr&gt;, ADY &lt;dbl&gt;, ADTF &lt;lgl&gt;, AVISIT &lt;chr&gt;, AVISITN &lt;dbl&gt;,</span></span>
<span><span class="co">#   PARAM &lt;chr&gt;, PARAMCD &lt;chr&gt;, PARAMN &lt;dbl&gt;, PARAMTYP &lt;chr&gt;, AVAL &lt;dbl&gt;, BASE &lt;dbl&gt;,</span></span>
<span><span class="co">#   CHG &lt;dbl&gt;, AWRANGE &lt;chr&gt;, AWTARGET &lt;dbl&gt;, AWTDIFF &lt;dbl&gt;, AWLO &lt;dbl&gt;, AWHI &lt;dbl&gt;,</span></span>
<span><span class="co">#   AWU &lt;chr&gt;, ABLFL &lt;chr&gt;, ANL01FL &lt;chr&gt;</span></span>
<span><span class="co">#  Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>The <code>expression</code> function can be used to define any R
expression. This function accepts unquoted variable names, logical
operators, and R functions like <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null()</a></code> and
<code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code>. You can use the the “where” parameter with an
expression to narrow down the data you are working with and reduce the
memory footprint of your program.</p>
</div>
<div class="section level3">
<h3 id="get-top-n-rows">Get Top N Rows<a class="anchor" aria-label="anchor" href="#get-top-n-rows"></a>
</h3>
<p>Another way to limit the data returned by your program is to use the
“top” parameter. This parameter allows you to return only the “top N”
number of rows in the target data item. The “top” parameter is useful
for exploratory purposes. Here is an example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get sample data directory</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"fetch"</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Create catalog</span></span>
<span><span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/catalog.html">catalog</a></span><span class="op">(</span><span class="va">pkg</span>, <span class="va">engines</span><span class="op">$</span><span class="va">csv</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subset data for a specific subject</span></span>
<span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fetch.html">fetch</a></span><span class="op">(</span><span class="va">ct</span><span class="op">$</span><span class="va">ADVS</span>, top <span class="op">=</span> <span class="fl">5</span>, where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">SUBJID</span> <span class="op">==</span> <span class="st">'049'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="va">dt</span></span>
<span><span class="co"># A tibble: 5 × 37</span></span>
<span><span class="co">#   STUDYID USUBJID  SUBJID SITEID SRCDOM SRCVAR SRCSEQ TRTP  TRTPN TRTA  TRTAN RANDFL SAFFL</span></span>
<span><span class="co">#   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;</span></span>
<span><span class="co"># 1 ABC     ABC-01-… 049    01     VS     VSSTR…      9 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co"># 2 ABC     ABC-01-… 049    01     VS     VSSTR…     41 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co"># 3 ABC     ABC-01-… 049    01     NA     NA         NA ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co"># 4 ABC     ABC-01-… 049    01     VS     VSSTR…     34 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co"># 5 ABC     ABC-01-… 049    01     VS     VSSTR…     35 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co">#   24 more variables: MITTFL &lt;chr&gt;, PPROTFL &lt;chr&gt;, TRTSDT &lt;chr&gt;, TRTEDT &lt;chr&gt;,</span></span>
<span><span class="co">#   ADT &lt;chr&gt;, ADY &lt;dbl&gt;, ADTF &lt;lgl&gt;, AVISIT &lt;chr&gt;, AVISITN &lt;dbl&gt;, PARAM &lt;chr&gt;,</span></span>
<span><span class="co">#   PARAMCD &lt;chr&gt;, PARAMN &lt;dbl&gt;, PARAMTYP &lt;chr&gt;, AVAL &lt;dbl&gt;, BASE &lt;dbl&gt;, CHG &lt;dbl&gt;,</span></span>
<span><span class="co">#   AWRANGE &lt;chr&gt;, AWTARGET &lt;dbl&gt;, AWTDIFF &lt;dbl&gt;, AWLO &lt;dbl&gt;, AWHI &lt;dbl&gt;, AWU &lt;chr&gt;,</span></span>
<span><span class="co">#   ABLFL &lt;chr&gt;, ANL01FL &lt;chr&gt;</span></span></code></pre></div>
<p>The above fetch returned the top 5 rows of the dataset for subject
‘049’. Note that the “top” parameter can be used with or without the
“where” parameter.</p>
</div>
<div class="section level3">
<h3 id="apply-a-pattern-to-a-catalog">Apply a Pattern to a Catalog<a class="anchor" aria-label="anchor" href="#apply-a-pattern-to-a-catalog"></a>
</h3>
<p>The previous examples loaded all datasets from the data source into
the data catalog. There may be instances, however, when you have a very
large number of datasets, and want to limit the data items loaded into
the catalog. For this situation, you can use the “pattern” parameter on
the <code><a href="../reference/catalog.html">catalog()</a></code> function, like so:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get sample data directory</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"fetch"</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Create catalog, applying pattern to dataset names</span></span>
<span><span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/catalog.html">catalog</a></span><span class="op">(</span><span class="va">pkg</span>, <span class="va">engines</span><span class="op">$</span><span class="va">csv</span>, pattern <span class="op">=</span> <span class="st">"*S*"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View catalog</span></span>
<span><span class="va">ct</span></span>
<span><span class="co"># data catalog: 3 items</span></span>
<span><span class="co"># - Source: C:/packages/fetch/inst/extdata</span></span>
<span><span class="co"># - Engine: csv</span></span>
<span><span class="co"># - Pattern: *S*</span></span>
<span><span class="co"># - Items:</span></span>
<span><span class="co"># data item 'ADPSGA': 42 cols 695 rows</span></span>
<span><span class="co"># data item 'ADSL': 56 cols 87 rows</span></span>
<span><span class="co"># data item 'ADVS': 37 cols 3617 rows</span></span></code></pre></div>
<p>The above example limits the items in the catalog to those with an
“S” in the name. While this is not a realistic example, it nevertheless
demonstrates how the “pattern” parameter can be used to reduce the
datasets loaded into the catalog.</p>
</div>
<div class="section level3">
<h3 id="apply-a-where-expression-to-an-entire-catalog">Apply a Where Expression to an Entire Catalog<a class="anchor" aria-label="anchor" href="#apply-a-where-expression-to-an-entire-catalog"></a>
</h3>
<p>Sometimes you want to subset all the datasets in your catalog. This
subset can be accomplished with the “where” parameter on the
<code><a href="../reference/catalog.html">catalog()</a></code> function. Observe:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get sample data directory</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"fetch"</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Create catalog without where expression</span></span>
<span><span class="va">ct1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/catalog.html">catalog</a></span><span class="op">(</span><span class="va">pkg</span>, <span class="va">engines</span><span class="op">$</span><span class="va">csv</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View catalog</span></span>
<span><span class="va">ct1</span></span>
<span><span class="co"># data catalog: 6 items</span></span>
<span><span class="co"># - Source: C:/packages/fetch/inst/extdata</span></span>
<span><span class="co"># - Engine: csv</span></span>
<span><span class="co"># - Items:</span></span>
<span><span class="co"># data item 'ADAE': 56 cols 150 rows</span></span>
<span><span class="co"># data item 'ADEX': 17 cols 348 rows</span></span>
<span><span class="co"># data item 'ADPR': 37 cols 552 rows</span></span>
<span><span class="co"># data item 'ADPSGA': 42 cols 695 rows</span></span>
<span><span class="co"># data item 'ADSL': 56 cols 87 rows</span></span>
<span><span class="co"># data item 'ADVS': 37 cols 3617 rows</span></span>
<span></span>
<span><span class="co"># Create catalog with where expression</span></span>
<span><span class="va">ct2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/catalog.html">catalog</a></span><span class="op">(</span><span class="va">pkg</span>, <span class="va">engines</span><span class="op">$</span><span class="va">csv</span>, where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">SUBJID</span> <span class="op">==</span> <span class="st">'049'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View catalog</span></span>
<span><span class="va">ct2</span></span>
<span><span class="co"># data catalog: 6 items</span></span>
<span><span class="co"># - Source: C:/packages/fetch/inst/extdata</span></span>
<span><span class="co"># - Engine: csv</span></span>
<span><span class="co"># - Where: SUBJID == "049"</span></span>
<span><span class="co"># - Items:</span></span>
<span><span class="co"># # data item 'ADAE': 56 cols 5 rows</span></span>
<span><span class="co"># - Where: SUBJID == "049"</span></span>
<span><span class="co"># # data item 'ADEX': 17 cols 4 rows</span></span>
<span><span class="co"># - Where: SUBJID == "049"</span></span>
<span><span class="co"># # data item 'ADPR': 37 cols 7 rows</span></span>
<span><span class="co"># - Where: SUBJID == "049"</span></span>
<span><span class="co"># # data item 'ADPSGA': 42 cols 10 rows</span></span>
<span><span class="co"># - Where: SUBJID == "049"</span></span>
<span><span class="co"># # data item 'ADSL': 56 cols 1 rows</span></span>
<span><span class="co"># - Where: SUBJID == "049"</span></span>
<span><span class="co"># # data item 'ADVS': 37 cols 44 rows</span></span>
<span><span class="co"># - Where: SUBJID == "049"</span></span></code></pre></div>
<p>Notice that a where expression has been added to each data item in
the catalog, and the row counts for each item have been reduced. Now
let’s fetch some data from this catalog:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Subset data for a specific subject</span></span>
<span><span class="va">dt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fetch.html">fetch</a></span><span class="op">(</span><span class="va">ct2</span><span class="op">$</span><span class="va">ADVS</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results of ADVS fetch</span></span>
<span><span class="va">dt1</span></span>
<span><span class="co"># A tibble: 44 × 37</span></span>
<span><span class="co">#    STUDYID USUBJID    SUBJID SITEID SRCDOM SRCVAR   SRCSEQ TRTP  TRTPN TRTA  TRTAN RANDFL SAFFL</span></span>
<span><span class="co">#    &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;</span></span>
<span><span class="co">#  1 ABC     ABC-01-049 049    01     VS     VSSTRESN      9 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co">#  2 ABC     ABC-01-049 049    01     VS     VSSTRESN     41 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co">#  3 ABC     ABC-01-049 049    01     NA     NA           NA ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co">#  4 ABC     ABC-01-049 049    01     VS     VSSTRESN     34 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co">#  5 ABC     ABC-01-049 049    01     VS     VSSTRESN     35 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co">#  6 ABC     ABC-01-049 049    01     VS     VSSTRESN     36 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co">#  7 ABC     ABC-01-049 049    01     VS     VSSTRESN     37 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co">#  8 ABC     ABC-01-049 049    01     VS     VSSTRESN     38 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co">#  9 ABC     ABC-01-049 049    01     VS     VSSTRESN     39 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co"># 10 ABC     ABC-01-049 049    01     VS     VSSTRESN     40 ARM D     4 ARM D     4 Y      Y    </span></span>
<span><span class="co">#  34 more rows</span></span>
<span><span class="co">#  24 more variables: MITTFL &lt;chr&gt;, PPROTFL &lt;chr&gt;, TRTSDT &lt;chr&gt;, TRTEDT &lt;chr&gt;, ADT &lt;chr&gt;,</span></span>
<span><span class="co">#   ADY &lt;dbl&gt;, ADTF &lt;lgl&gt;, AVISIT &lt;chr&gt;, AVISITN &lt;dbl&gt;, PARAM &lt;chr&gt;, PARAMCD &lt;chr&gt;,</span></span>
<span><span class="co">#   PARAMN &lt;dbl&gt;, PARAMTYP &lt;chr&gt;, AVAL &lt;dbl&gt;, BASE &lt;dbl&gt;, CHG &lt;dbl&gt;, AWRANGE &lt;chr&gt;,</span></span>
<span><span class="co">#   AWTARGET &lt;dbl&gt;, AWTDIFF &lt;dbl&gt;, AWLO &lt;dbl&gt;, AWHI &lt;dbl&gt;, AWU &lt;chr&gt;, ABLFL &lt;chr&gt;,</span></span>
<span><span class="co">#   ANL01FL &lt;chr&gt;</span></span>
<span><span class="co">#  Use `print(n = ...)` to see more rows</span></span>
<span></span>
<span></span>
<span><span class="co"># View results of ADSL fetch</span></span>
<span><span class="va">dt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fetch.html">fetch</a></span><span class="op">(</span><span class="va">ct2</span><span class="op">$</span><span class="va">ADSL</span><span class="op">)</span></span>
<span><span class="co"># A tibble: 1 × 56</span></span>
<span><span class="co">#   STUDYID USUBJID    SUBJID SITEID   AGE AGEU  AGEGR1   SEX   RACE  RACEN ETHNIC ETHNICN COUNTRY</span></span>
<span><span class="co">#   &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;lgl&gt;  </span></span>
<span><span class="co"># 1 ABC     ABC-01-049 049    01        39 YEARS 30-39 y… M     WHITE     5 NOT H…       2 NA     </span></span>
<span><span class="co">#   43 more variables: ARM &lt;chr&gt;, ACTARM &lt;lgl&gt;, TRT01P &lt;chr&gt;, TRT01PN &lt;dbl&gt;, TRT01A &lt;chr&gt;,</span></span>
<span><span class="co">#   TRT01AN &lt;dbl&gt;, TRTSDT &lt;chr&gt;, TRTEDT &lt;chr&gt;, TRTDURN &lt;dbl&gt;, TRTDURU &lt;chr&gt;, TR01SDT &lt;chr&gt;,</span></span>
<span><span class="co">#   TR01EDT &lt;chr&gt;, INCNFL &lt;chr&gt;, RANDFL &lt;chr&gt;, RANDEXC1 &lt;lgl&gt;, RANDEXC2 &lt;chr&gt;, RANDEXC3 &lt;chr&gt;,</span></span>
<span><span class="co">#   RANDEXC4 &lt;chr&gt;, SAFFL &lt;chr&gt;, SAFEXC1 &lt;chr&gt;, SAFEXC2 &lt;chr&gt;, MITTFL &lt;chr&gt;, MITTEXC1 &lt;chr&gt;,</span></span>
<span><span class="co">#   MITTEXC2 &lt;chr&gt;, PPROTFL &lt;chr&gt;, PPROTEX1 &lt;chr&gt;, PPROTEX2 &lt;chr&gt;, PPROTEX3 &lt;chr&gt;,</span></span>
<span><span class="co">#   PPROTEX4 &lt;chr&gt;, COMPLFL &lt;chr&gt;, STDYDISP &lt;chr&gt;, STDYREAS &lt;chr&gt;, INCNDT &lt;chr&gt;, RANDDT &lt;chr&gt;,</span></span>
<span><span class="co">#   DTHDT &lt;lgl&gt;, DTHFL &lt;chr&gt;, MISSDOSE &lt;dbl&gt;, TP1TRTR &lt;chr&gt;, TP2TRTR &lt;chr&gt;, TP3TRTR &lt;chr&gt;,...</span></span></code></pre></div>
<p>As you can see, both the ADVS and ADSL datasets have been subset for
subject ‘049’. This feature of the <em>fetch</em> package makes it easy
to target just the rows you are looking for.</p>
</div>
<div class="section level3">
<h3 id="add-import-specifications-to-a-catalog">Add Import Specifications to a Catalog<a class="anchor" aria-label="anchor" href="#add-import-specifications-to-a-catalog"></a>
</h3>
<p>Some data files contain accurate data type information within them,
and others do not. For example, CSV files do not contain data type
information, but RDATA files do. If the data type information is not
available, the data engine will try to guess the data types. However, it
does not always guess accurately. Sometimes you need to help the data
engine determine what the data type of a column is supposed to be.
Import specs allow you to to specify the correct data type for a
column.</p>
<p>Examine the dictionary for the ADVS dataset:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get sample data directory</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"fetch"</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Create catalog without import spec</span></span>
<span><span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/catalog.html">catalog</a></span><span class="op">(</span><span class="va">pkg</span>, <span class="va">engines</span><span class="op">$</span><span class="va">csv</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View dictionary for ADVS</span></span>
<span><span class="va">ct</span><span class="op">$</span><span class="va">ADVS</span></span>
<span><span class="co"># data item 'ADVS': 37 cols 3617 rows</span></span>
<span><span class="co"># - Engine: csv</span></span>
<span><span class="co"># - Size: 1.1 Mb</span></span>
<span><span class="co"># - Last Modified: 2020-09-18 14:30:22</span></span>
<span><span class="co">#    Name   Column     Class Label Format  NAs MaxChar</span></span>
<span><span class="co"># 1  ADVS  STUDYID character  &lt;NA&gt;     NA    0       3</span></span>
<span><span class="co"># 2  ADVS  USUBJID character  &lt;NA&gt;     NA    0      10</span></span>
<span><span class="co"># 3  ADVS   SUBJID character  &lt;NA&gt;     NA    0       3</span></span>
<span><span class="co"># 4  ADVS   SITEID character  &lt;NA&gt;     NA    0       2</span></span>
<span><span class="co"># 5  ADVS   SRCDOM character  &lt;NA&gt;     NA   85       2</span></span>
<span><span class="co"># 6  ADVS   SRCVAR character  &lt;NA&gt;     NA   85       8</span></span>
<span><span class="co"># 7  ADVS   SRCSEQ   numeric  &lt;NA&gt;     NA   85       2</span></span>
<span><span class="co"># 8  ADVS     TRTP character  &lt;NA&gt;     NA   85       5</span></span>
<span><span class="co"># 9  ADVS    TRTPN   numeric  &lt;NA&gt;     NA   85       1</span></span>
<span><span class="co"># 10 ADVS     TRTA character  &lt;NA&gt;     NA   85       5</span></span>
<span><span class="co"># 11 ADVS    TRTAN   numeric  &lt;NA&gt;     NA   85       1</span></span>
<span><span class="co"># 12 ADVS   RANDFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 13 ADVS    SAFFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 14 ADVS   MITTFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 15 ADVS  PPROTFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 16 ADVS   TRTSDT character  &lt;NA&gt;     NA   54       9 # Character by default</span></span>
<span><span class="co"># 17 ADVS   TRTEDT character  &lt;NA&gt;     NA  119       9 # Character by default</span></span>
<span><span class="co"># 18 ADVS      ADT character  &lt;NA&gt;     NA    0       9</span></span>
<span><span class="co"># 19 ADVS      ADY   numeric  &lt;NA&gt;     NA   54       4</span></span>
<span><span class="co"># 20 ADVS     ADTF   logical  &lt;NA&gt;     NA 3617       0</span></span>
<span><span class="co"># 21 ADVS   AVISIT character  &lt;NA&gt;     NA   50      14</span></span>
<span><span class="co"># 22 ADVS  AVISITN   numeric  &lt;NA&gt;     NA   50       2</span></span>
<span><span class="co"># 23 ADVS    PARAM character  &lt;NA&gt;     NA    0      35</span></span>
<span><span class="co"># 24 ADVS  PARAMCD character  &lt;NA&gt;     NA    0       6</span></span>
<span><span class="co"># 25 ADVS   PARAMN   numeric  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 26 ADVS PARAMTYP character  &lt;NA&gt;     NA 3532       7</span></span>
<span><span class="co"># 27 ADVS     AVAL   numeric  &lt;NA&gt;     NA    0       5</span></span>
<span><span class="co"># 28 ADVS     BASE   numeric  &lt;NA&gt;     NA   70       5</span></span>
<span><span class="co"># 29 ADVS      CHG   numeric  &lt;NA&gt;     NA 1312       4</span></span>
<span><span class="co"># 30 ADVS  AWRANGE character  &lt;NA&gt;     NA 1331      25</span></span>
<span><span class="co"># 31 ADVS AWTARGET   numeric  &lt;NA&gt;     NA 1331       3</span></span>
<span><span class="co"># 32 ADVS  AWTDIFF   numeric  &lt;NA&gt;     NA 1331       2</span></span>
<span><span class="co"># 33 ADVS     AWLO   numeric  &lt;NA&gt;     NA 1331       3</span></span>
<span><span class="co"># 34 ADVS     AWHI   numeric  &lt;NA&gt;     NA 1331       3</span></span>
<span><span class="co"># 35 ADVS      AWU character  &lt;NA&gt;     NA 1331       4</span></span>
<span><span class="co"># 36 ADVS    ABLFL character  &lt;NA&gt;     NA 2869       1</span></span>
<span><span class="co"># 37 ADVS  ANL01FL character  &lt;NA&gt;     NA  448       1</span></span></code></pre></div>
<p>Note that the data types of the “TRTSDT” and “TRTEDT” are listed as
character. In fact, these columns are supposed to be a date. You can
force the date data type assignment with an import spec, as follows:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get sample data directory</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"fetch"</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Create import spec</span></span>
<span><span class="va">spc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_spec.html">import_spec</a></span><span class="op">(</span>TRTSDT <span class="op">=</span> <span class="st">"date=%d%b%Y"</span>,</span>
<span>                   TRTEDT <span class="op">=</span> <span class="st">"date=%d%b%Y"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create catalog with import spec</span></span>
<span><span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/catalog.html">catalog</a></span><span class="op">(</span><span class="va">pkg</span>, <span class="va">engines</span><span class="op">$</span><span class="va">csv</span>, import_specs <span class="op">=</span> <span class="va">spc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View dictionary for ADVS with Import Spec</span></span>
<span><span class="va">ct</span><span class="op">$</span><span class="va">ADVS</span></span>
<span><span class="co"># data item 'ADVS': 37 cols 3617 rows</span></span>
<span><span class="co"># - Engine: csv</span></span>
<span><span class="co"># - Size: 1.1 Mb</span></span>
<span><span class="co"># - Last Modified: 2020-09-18 14:30:22</span></span>
<span><span class="co">#    Name   Column     Class Label Format  NAs MaxChar</span></span>
<span><span class="co"># 1  ADVS  STUDYID character  &lt;NA&gt;     NA    0       3</span></span>
<span><span class="co"># 2  ADVS  USUBJID character  &lt;NA&gt;     NA    0      10</span></span>
<span><span class="co"># 3  ADVS   SUBJID character  &lt;NA&gt;     NA    0       3</span></span>
<span><span class="co"># 4  ADVS   SITEID character  &lt;NA&gt;     NA    0       2</span></span>
<span><span class="co"># 5  ADVS   SRCDOM character  &lt;NA&gt;     NA   85       2</span></span>
<span><span class="co"># 6  ADVS   SRCVAR character  &lt;NA&gt;     NA   85       8</span></span>
<span><span class="co"># 7  ADVS   SRCSEQ   numeric  &lt;NA&gt;     NA   85       2</span></span>
<span><span class="co"># 8  ADVS     TRTP character  &lt;NA&gt;     NA   85       5</span></span>
<span><span class="co"># 9  ADVS    TRTPN   numeric  &lt;NA&gt;     NA   85       1</span></span>
<span><span class="co"># 10 ADVS     TRTA character  &lt;NA&gt;     NA   85       5</span></span>
<span><span class="co"># 11 ADVS    TRTAN   numeric  &lt;NA&gt;     NA   85       1</span></span>
<span><span class="co"># 12 ADVS   RANDFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 13 ADVS    SAFFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 14 ADVS   MITTFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 15 ADVS  PPROTFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 16 ADVS   TRTSDT      Date  &lt;NA&gt;     NA   54      10 # Converted to Date </span></span>
<span><span class="co"># 17 ADVS   TRTEDT      Date  &lt;NA&gt;     NA  119      10 # Converted to Date</span></span>
<span><span class="co"># 18 ADVS      ADT character  &lt;NA&gt;     NA    0       9</span></span>
<span><span class="co"># 19 ADVS      ADY   numeric  &lt;NA&gt;     NA   54       4</span></span>
<span><span class="co"># 20 ADVS     ADTF   logical  &lt;NA&gt;     NA 3617       0</span></span>
<span><span class="co"># 21 ADVS   AVISIT character  &lt;NA&gt;     NA   50      14</span></span>
<span><span class="co"># 22 ADVS  AVISITN   numeric  &lt;NA&gt;     NA   50       2</span></span>
<span><span class="co"># 23 ADVS    PARAM character  &lt;NA&gt;     NA    0      35</span></span>
<span><span class="co"># 24 ADVS  PARAMCD character  &lt;NA&gt;     NA    0       6</span></span>
<span><span class="co"># 25 ADVS   PARAMN   numeric  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 26 ADVS PARAMTYP character  &lt;NA&gt;     NA 3532       7</span></span>
<span><span class="co"># 27 ADVS     AVAL   numeric  &lt;NA&gt;     NA    0       5</span></span>
<span><span class="co"># 28 ADVS     BASE   numeric  &lt;NA&gt;     NA   70       5</span></span>
<span><span class="co"># 29 ADVS      CHG   numeric  &lt;NA&gt;     NA 1312       4</span></span>
<span><span class="co"># 30 ADVS  AWRANGE character  &lt;NA&gt;     NA 1331      25</span></span>
<span><span class="co"># 31 ADVS AWTARGET   numeric  &lt;NA&gt;     NA 1331       3</span></span>
<span><span class="co"># 32 ADVS  AWTDIFF   numeric  &lt;NA&gt;     NA 1331       2</span></span>
<span><span class="co"># 33 ADVS     AWLO   numeric  &lt;NA&gt;     NA 1331       3</span></span>
<span><span class="co"># 34 ADVS     AWHI   numeric  &lt;NA&gt;     NA 1331       3</span></span>
<span><span class="co"># 35 ADVS      AWU character  &lt;NA&gt;     NA 1331       4</span></span>
<span><span class="co"># 36 ADVS    ABLFL character  &lt;NA&gt;     NA 2869       1</span></span>
<span><span class="co"># 37 ADVS  ANL01FL character  &lt;NA&gt;     NA  448       1</span></span></code></pre></div>
<p>Observe that the columns “TRTSDT” and “TRTEDT” are now converted to
Date columns. This import spec will apply to all “TRTSDT” and “TRTEDT”
columns in all datasets. The format “%d%b%Y” was written specifically to
read in the data value this files uses. See the
<code><a href="../reference/import_spec.html">import_spec()</a></code> documentation for more information on these
data formats, and for other possible data type specifications. Also see
the <code><a href="../reference/specs.html">specs()</a></code> documentation if you want to assign a unique
import specifications to each data item in the catalog.</p>
</div>
<div class="section level3">
<h3 id="add-import-specifications-to-a-fetch">Add Import Specifications to a Fetch<a class="anchor" aria-label="anchor" href="#add-import-specifications-to-a-fetch"></a>
</h3>
<p>You may also add an import specification to the fetch operation. The
import specification is defined with the <code><a href="../reference/import_spec.html">import_spec()</a></code>
function in the same way as the catalog operation:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get sample data directory</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"fetch"</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Create import spec</span></span>
<span><span class="va">spc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_spec.html">import_spec</a></span><span class="op">(</span>TRTSDT <span class="op">=</span> <span class="st">"date=%d%b%Y"</span>,</span>
<span>                   TRTEDT <span class="op">=</span> <span class="st">"date=%d%b%Y"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create catalog with import spec</span></span>
<span><span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/catalog.html">catalog</a></span><span class="op">(</span><span class="va">pkg</span>, <span class="va">engines</span><span class="op">$</span><span class="va">csv</span>, import_specs <span class="op">=</span> <span class="va">spc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View dictionary for ADVS with Import Spec</span></span>
<span><span class="va">ct</span><span class="op">$</span><span class="va">ADVS</span></span>
<span><span class="co"># data item 'ADVS': 37 cols 3617 rows</span></span>
<span><span class="co"># - Engine: csv</span></span>
<span><span class="co"># - Size: 1.1 Mb</span></span>
<span><span class="co"># - Last Modified: 2020-09-18 14:30:22</span></span>
<span><span class="co">#    Name   Column     Class Label Format  NAs MaxChar</span></span>
<span><span class="co"># 1  ADVS  STUDYID character  &lt;NA&gt;     NA    0       3</span></span>
<span><span class="co"># 2  ADVS  USUBJID character  &lt;NA&gt;     NA    0      10</span></span>
<span><span class="co"># 3  ADVS   SUBJID character  &lt;NA&gt;     NA    0       3</span></span>
<span><span class="co"># 4  ADVS   SITEID character  &lt;NA&gt;     NA    0       2</span></span>
<span><span class="co"># 5  ADVS   SRCDOM character  &lt;NA&gt;     NA   85       2</span></span>
<span><span class="co"># 6  ADVS   SRCVAR character  &lt;NA&gt;     NA   85       8</span></span>
<span><span class="co"># 7  ADVS   SRCSEQ   numeric  &lt;NA&gt;     NA   85       2</span></span>
<span><span class="co"># 8  ADVS     TRTP character  &lt;NA&gt;     NA   85       5</span></span>
<span><span class="co"># 9  ADVS    TRTPN   numeric  &lt;NA&gt;     NA   85       1</span></span>
<span><span class="co"># 10 ADVS     TRTA character  &lt;NA&gt;     NA   85       5</span></span>
<span><span class="co"># 11 ADVS    TRTAN   numeric  &lt;NA&gt;     NA   85       1</span></span>
<span><span class="co"># 12 ADVS   RANDFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 13 ADVS    SAFFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 14 ADVS   MITTFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 15 ADVS  PPROTFL character  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 16 ADVS   TRTSDT      Date  &lt;NA&gt;     NA   54      10</span></span>
<span><span class="co"># 17 ADVS   TRTEDT      Date  &lt;NA&gt;     NA  119      10</span></span>
<span><span class="co"># 18 ADVS      ADT character  &lt;NA&gt;     NA    0       9</span></span>
<span><span class="co"># 19 ADVS      ADY   numeric  &lt;NA&gt;     NA   54       4</span></span>
<span><span class="co"># 20 ADVS     ADTF   logical  &lt;NA&gt;     NA 3617       0</span></span>
<span><span class="co"># 21 ADVS   AVISIT character  &lt;NA&gt;     NA   50      14</span></span>
<span><span class="co"># 22 ADVS  AVISITN   numeric  &lt;NA&gt;     NA   50       2</span></span>
<span><span class="co"># 23 ADVS    PARAM character  &lt;NA&gt;     NA    0      35</span></span>
<span><span class="co"># 24 ADVS  PARAMCD character  &lt;NA&gt;     NA    0       6</span></span>
<span><span class="co"># 25 ADVS   PARAMN   numeric  &lt;NA&gt;     NA    0       1</span></span>
<span><span class="co"># 26 ADVS PARAMTYP character  &lt;NA&gt;     NA 3532       7</span></span>
<span><span class="co"># 27 ADVS     AVAL   numeric  &lt;NA&gt;     NA    0       5</span></span>
<span><span class="co"># 28 ADVS     BASE   numeric  &lt;NA&gt;     NA   70       5</span></span>
<span><span class="co"># 29 ADVS      CHG   numeric  &lt;NA&gt;     NA 1312       4</span></span>
<span><span class="co"># 30 ADVS  AWRANGE character  &lt;NA&gt;     NA 1331      25</span></span>
<span><span class="co"># 31 ADVS AWTARGET   numeric  &lt;NA&gt;     NA 1331       3</span></span>
<span><span class="co"># 32 ADVS  AWTDIFF   numeric  &lt;NA&gt;     NA 1331       2</span></span>
<span><span class="co"># 33 ADVS     AWLO   numeric  &lt;NA&gt;     NA 1331       3</span></span>
<span><span class="co"># 34 ADVS     AWHI   numeric  &lt;NA&gt;     NA 1331       3</span></span>
<span><span class="co"># 35 ADVS      AWU character  &lt;NA&gt;     NA 1331       4</span></span>
<span><span class="co"># 36 ADVS    ABLFL character  &lt;NA&gt;     NA 2869       1</span></span>
<span><span class="co"># 37 ADVS  ANL01FL character  &lt;NA&gt;     NA  448       1</span></span></code></pre></div>
<p>The results of this operation are similar to the previous example,
when we applied the import spec to the catalog. The difference is that
now the import spec applies only to this specific fetch operation, not
the entire catalog.</p>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>For next steps, it is suggested to play around with the
<strong>fetch</strong> functions, and note how easy these functions are
to use. You may also wish to review the documentation for the
<code><a href="../reference/catalog.html">catalog()</a></code>, <code><a href="../reference/fetch.html">fetch()</a></code>, <code><a href="../reference/import_spec.html">import_spec()</a></code>
functions. The documentation contains some additional examples and
descriptions of all parameters.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by David Bosak.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
